<html>

<head>
	<title>Visual Studio Code Remote :: PHP</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>

	<!-- phpinfo(); 
	 run to start server:  php -S 0.0.0.0:8000
	then go to Ports -> Ctrl + Click -> Local Address -->
	<div id="header">
		<h1>Home</h1>
	</div>
	<div id="wrapper">

		<div id="content">
			<h1>Home</h1>
			<h1>User management</h1>
			<button class="openUserModal">&#43; Create user</button>
			<h1>Subscriptions management</h1>
			<button class="openSubscriptionModal">&#43; Create user</button>
			<h1>Subscription payments</h1>
		</div>
		<div id="navigation">
			<p>
				<strong>Nav</strong>
			</p>
			<ul>
				<li>
					<a href="#home" class="navLink" id="home">Home</a>
				</li>
				<li>
					<a href="#users" class="navLink" id="users">Users</a>
				</li>
				<li>
					<a href="#subscriptions" class="navLink" id="subscriptions">Subscriptions</a>
				</li>
				<li>
					<a href="#paymements" class="navLink" id="payments">Payments</a>
				</li>
				<li>
					<a href="debug.php">Debug</a>
				</li>
				<li>
					<a href='initializeDB.php'>Settings (init db)</a>
				</li>
			</ul>
		</div>
		<div id="extra">
			<p>
				<strong>Quick stats</strong>
			</p>
			<p>
			<ul class="noSymbol">
				<li>
					Users: X
				</li>
				<li>
					Subscriptions: X
				</li>
				<li>
					Amount due: XXX.YYâ‚¬
				</li>
			</ul>
			</p>
		</div>
		<div id="footer">
			<p>Footer</p>
		</div>
	</div>

	<!-- MODAL -->
	<!-- The User Modal -->
	<div id="manageUser" class="modal">
		<!-- Modal content -->
		<div class="modal-content">
			<div class="modal-header">
				<span class="closeModal">&times;</span>
				<h2>Action User</h2>
			</div>
			<div class="modal-body">
				<p>Some text in the Modal Body</p>
				<p>Some other text...</p>
			</div>
			<div class="modal-footer">
				<button>Save</button>
			</div>
		</div>
	</div>
	<!-- The Subscription Modal -->
	<div id="manageSubscription" class="modal">
		<!-- Modal content -->
		<div class="modal-content">
			<div class="modal-header">
				<span class="closeModal">&times;</span>
				<h2>Action Subscription</h2>
			</div>
			<div class="modal-body">
				<p>Some text in the Modal Body</p>
				<p>Some other text...</p>
			</div>
			<div class="modal-footer">
				<button>Save</button>
			</div>
		</div>
	</div>
	<!-- https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_delete_modal - Delete modal -->
	<script>
		// ------------------ Functions
		function getData() {
			const Http = new XMLHttpRequest();
			const url = 'dataManager.php?action=get_Data';
			Http.open("GET", url);
			Http.send();
			Http.onreadystatechange = (e) => {
				//console.log(Http.responseText);
				var data = JSON.parse(Http.responseText);
				console.log(data);
			}
		}

		// ------------------ Event Listeners
		// When the user clicks the button, open the modal 
		document.getElementsByClassName("openUserModal")[0].onclick = function () {
			document.getElementById("manageUser").style.display = "block";
		}
		document.getElementsByClassName("openSubscriptionModal")[0].onclick = function () {
			document.getElementById("manageSubscription").style.display = "block";
		}
		// When the user clicks anywhere outside of the modal, close it
		window.onclick = function (event) {
			if (event.target == document.getElementById("manageUser")) {
				document.getElementById("manageUser").style.display = "none";
			}
			if (event.target == document.getElementById("manageSubscription")) {
				document.getElementById("manageSubscription").style.display = "none";
			}
		}
		// When the user clicks on <span> (x), close the modal
		const closeModals = document.querySelectorAll('.closeModal');
		closeModals.forEach(el => el.addEventListener('click', event => {
			document.getElementById("manageUser").style.display = "none";
			document.getElementById("manageSubscription").style.display = "none";
		}));

		/*const navLinks = document.querySelectorAll('.navLink');
		navLinks.forEach(el => el.addEventListener('click', event => {
			alert(el.id);
		}));*/

		// ------------------ Begin
		getData();

	</script>
</body>

</html>